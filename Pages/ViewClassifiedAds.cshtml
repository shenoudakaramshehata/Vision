@page
@model Vision.Pages.ViewClassifiedAdsModel
@inject CRMDBContext _context
@using Microsoft.AspNetCore.Identity
@using System.Web;
@using Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Manage.Internal
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@Html.AntiForgeryToken()
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@{
    //var classifiedAdsCategories = _context.ClassifiedAdsCategories;
    var locale = Request.HttpContext.Features.Get<IRequestCultureFeature>();
    var BrowserCulture = locale.RequestCulture.UICulture.ToString();
    var Categories = _context.ClassifiedAdsCategories.Select(e => new { e.ClassifiedAdsCategoryTitleAr, e.ClassifiedAdsCategoryTitleEn, e.ClassifiedAdsCategoryId });
    Layout = "FrontSite/_TemplateLayout";
}

<!-- Start of Main -->
<main class="main" style=" padding-top: 300px; padding-bottom: 100px;">
    <!-- Start of Breadcrumb -->
    <nav class="breadcrumb-nav">
        <div class="container">
            <ul class="breadcrumb bb-no">
                <li><a href="demo1.html">Home</a></li>
                <li>Shop</li>
            </ul>
        </div>
    </nav>
    <!-- End of Breadcrumb -->
    <!-- Start of Page Content -->
    <div class="page-content">
        <div class="container">
            <!-- Start of Shop Content -->
            <div class="shop-content row gutter-lg mb-10">
                <!-- Start of Sidebar, Shop Sidebar -->
                <aside class="sidebar shop-sidebar sticky-sidebar-wrapper sidebar-fixed">
                    <!-- Start of Sidebar Overlay -->
                    <div class="sidebar-overlay"></div>
                    <a class="sidebar-close" href="#"><i class="close-icon"></i></a>

                    <!-- Start of Sidebar Content -->
                    <div class="sidebar-content scrollable">
                        <!-- Start of Sticky Sidebar -->
                        <div class="sticky-sidebar">
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title"><span>All Ads Categories</span></h3>
                                <ul class="widget-body filter-items search-ul">
                                    @{
                                        @if(Model.TopAdsCategories != null)
                                        {
                                            foreach(var cat in Model.TopAdsCategories)
                                            {
                                                <li><a href="#">@cat.ClassifiedAdsCategoryTitleEn</a></li>

                                            }
                                        }
                                    }
                                </ul>
                            </div>
                            <!-- End of Collapsible Widget -->
                        </div>
                        <!-- End of Sidebar Content -->
                    </div>
                    @{
                        if(Model.SubAdsCategories != null)
                        {
                            foreach(var item in Model.TopAdsCategories)
                            {
                                <div class="sidebar-content scrollable">
                                    <!-- Start of Sticky Sidebar -->
                                    <div class="sticky-sidebar">
                                        <div class="widget widget-collapsible">
                                            <h3 class="widget-title collapsed"><span>@item.ClassifiedAdsCategoryTitleEn</span></h3>
                                            <ul class="widget-body filter-items search-ul" style="display: none;">
                                                @{

                                                    if (Model.SubAdsCategories != null)
                                                    {
                                                        foreach (var cat2 in Model.SubAdsCategories)
                                                        {
                                                            if(cat2.ClassifiedAdsCategoryParentId == item.ClassifiedAdsCategoryId)
                                                            {
                                                                <li><a href="#">@cat2.ClassifiedAdsCategoryTitleEn</a></li>

                                                            }
                                                                }
                                                            }
      }
                                            </ul>
                                        </div>
                                        <!-- End of Collapsible Widget -->
                                    </div>
                                    <!-- End of Sidebar Content -->
                                </div>
                            }
                        }
                    }
                    
                    <!-- End of Sidebar Content -->
                </aside>
                <!-- End of Shop Sidebar -->
                <!-- Start of Shop Main Content -->
                <div class="main-content">
                    @*<nav class="toolbox sticky-toolbox sticky-content fix-top">
                        <div class="toolbox-left">
                            <a href="#" class="btn btn-primary btn-outline btn-rounded left-sidebar-toggle
                                        btn-icon-left d-block d-lg-none">
                                <i class="w-icon-category"></i><span>Filters</span>
                            </a>
                            <div class="toolbox-item toolbox-sort select-box text-dark">
                                <label>Sort By :</label>
                                <select name="orderby" class="form-control">
                                    <option value="default" selected="selected">Default sorting</option>
                                    <option value="popularity">Sort by popularity</option>
                                    <option value="rating">Sort by average rating</option>
                                    <option value="date">Sort by latest</option>
                                    <option value="price-low">Sort by pric: low to high</option>
                                    <option value="price-high">Sort by price: high to low</option>
                                </select>
                            </div>
                        </div>
                        <div class="toolbox-right">
                            <div class="toolbox-item toolbox-show select-box">
                                <select name="count" class="form-control">
                                    <option value="9">Show 9</option>
                                    <option value="12" selected="selected">Show 12</option>
                                    <option value="24">Show 24</option>
                                    <option value="36">Show 36</option>
                                </select>
                            </div>
                            <div class="toolbox-item toolbox-layout">
                                <a href="vendor-wc-store-product-grid.html" class="icon-mode-grid btn-layout">
                                    <i class="w-icon-grid"></i>
                                </a>
                                <a href="vendor-wc-store-product-list.html"
                                   class="icon-mode-list btn-layout active">
                                    <i class="w-icon-list"></i>
                                </a>
                            </div>
                        </div>
                    </nav>*@
                    <div class="product-wrapper row cols-sm-1 cols-xs-2 cols-1">
                        @{
                            if(Model.ClassifiedAdsList != null)
                            {
                                foreach(var ad in Model.ClassifiedAdsList)
                                {
                                    <div class="product product-list">
                                        <figure class="product-media">
                                            <a href="product-default.html">
                                                <img src="@ad.MainPic" alt="Product" width="330"
                                                 height="338" />
                                                <img src="@ad.MainPic" alt="Product" width="330"
                                                 height="338" />
                                            </a>
                                            <div class="product-action-vertical">
                                                <a href="#" class="btn-product-icon btn-quickview w-icon-search"
                                                   title="Quick View"></a>
                                            </div>
                                           
                                        </figure>
                                        <div class="product-details">
                                            <h4 class="product-name">
                                                <a asp-page="ClassifiedDetails">@ad.TitleEn</a>
                                            </h4>
                                            <div class="product-price">
                                                <ins class="new-price">@ad.Price</ins>
                                            </div>
                                            <div class="sold-by">
                                                Sold By:
                                                <a href="#">Vendor 1</a>
                                            </div>
                                            <div class="product-desc">
                                                @ad.Description
                                            </div>
                                            <div class="product-action">
                                                <a href="#" class="btn-product btn-cart" title="Add to Cart">
                                                    <i class="w-icon-cart"></i> Ad details
                                                </a>
                                                <a href="#" class="btn-product-icon btn-wishlist w-icon-heart"
                                                   title="Add to wishlist"></a>
                                            </div>
                                        </div>
                                    </div>

                                }
                            }
                        }
                    </div>
                </div>
                <!-- End of Shop Main Content -->
            </div>
            <!-- End of Shop Content -->
        </div>
    </div>
    <!-- End of Page Content -->
</main>
<!-- End of Main -->