@page
@model Vision.Areas.CRM.Pages.Configurations.Users.Index1Model
@{
}


@Html.AntiForgeryToken()
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
    @{
    ViewBag.Title = "Users";
    ViewBag.pTitle = "Users";
    ViewBag.pageTitle = "Users";
}
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
*@

@*@section styles{
        <!--datatable css-->
        <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" />
        <!--datatable responsive css-->
        <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.bootstrap.min.css" />

        <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.2/css/buttons.dataTables.min.css">
}*@

<div class="row">
    <div class="col-lg-12">
        <div class="card" id="List">
            <div class="card-header border-0">
                <input type="text" asp-for="@Model.url" value="@Model.url" hidden id="UrlId" />

                <div class="row g-4 align-items-center">
                
                    <div class="col-sm-auto ms-auto">
                        <div class="hstack gap-2">

                            <button type="button" class="btn btn-success add-btn"
                                    data-bs-toggle="modal" id="create-btn"
                                    data-bs-target="#AddModal">
                                <i class="ri-add-line align-bottom me-1"></i> @sharedResource["Add"]
                            </button>

                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <table id="tblList" class="table table-striped table-row-bordered gy-5 gs-7 border rounded">
                    <thead>
                        <tr class="fw-bold fs-6 text-gray-800 px-7">
                            <th>@sharedResource["Id"]</th>
                            <th class="min-w-200px">@sharedResource["User Name"]</th>
                            <th class="min-w-200px">@sharedResource["Email"]</th>
                            @*<th >@sharedResource["User Sites Count"]</th>*@
                            <th class="min-w-200px text-end rounded-end">@sharedResource["Actions"]</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

            </div>
          @*  <div class="card-body">
                <table id="ajax-datatables" class="display table table-bordered dt-responsive" style="width:100%">
                    <thead>
                        <tr>

                            <th>Id</th>
                           
                            <th>FullName</th>
                            <th>PhoneNumber</th>
                          
                            <th>Actions</th>
                        </tr>
                    </thead>

                </table>
            </div>*@

            <!--end modal-->
        </div>
    </div>
    <!--end col-->
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        var domainUrl = document.getElementById("UrlId").value;
        console.log("ddwdwd");
        $("#tblList").DataTable({
            "proccessing": true,
            "serverSide": true,
            "ajax": {
                url: "/CRM/Configurations/Users/Index1",
                type: 'POST',
                headers: { 'XSRF-TOKEN': $('@Html.AntiForgeryToken()').val() }
            },
            "columnDefs": [
                {
                    "targets": -1,
                    "data": null,
                    "render": function (data, type, row, meta) {

                        const linkHtml = `<a href="/Admin/Configurations/Users/UserSites?id=${row.Id}" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">

                                                     <i class="ki-duotone ki-eye fs-2x">
                                                                                            <span class="path1"></span>
                                                                                    <span class="path2"></span>
                                                                                    <span class="path3"></span>
                                                                                    </i>
                                            </a>`;
                        return linkHtml;
                    },
                    "sortable": false
                },
                { "name": "Id", "data": "Id", "targets": 0, "visible": false },
                { "name": "UserName", "data": "UserName", "targets": 1, "visible": true },
                { "name": "Email", "data": "Email", "targets": 2 },
                //{ "name": "SitesCount", "data": "SitesCount", "targets": 3, "visible": true },
            ],
            "order": [[1, "desc"]],
            "language": {
                "lengthMenu": "Show _MENU_",
            },
            "dom":
                "<'row'" +
                "<'col-sm-6 d-flex align-items-center justify-conten-start'l>" +
                "<'col-sm-6 d-flex align-items-center justify-content-end'f>" +
                ">" +
                "<'table-responsive'tr>" +
                "<'row'" +
                "<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i>" +
                "<'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>" +
                ">",
            "createdRow": function (row, data, dataIndex) {
                var tdElements = $(row).find('td');
                $(tdElements[tdElements.length - 1]).addClass('text-end');
            }
        });
    });

</script>
@*<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!--datatable js-->
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>


        <!-- App js -->
        <script src="~/assets/js/app.js"></script>


<script>
    /*
    Template Name: Velzon - Admin & Dashboard Template
    Author: Themesbrand
    Website: https://Themesbrand.com/
    Contact: Themesbrand@gmail.com
    File: datatables init js
    */

    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#example',);
    });


    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#scroll-vertical', {
            "scrollY": "210px",
            "scrollCollapse": true,
            "paging": false
        });

    });

    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#scroll-horizontal', {
            "scrollX": true
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#alternative-pagination', {
            "pagingType": "full_numbers"
        });
    });

    $(document).ready(function () {
        var t = $('#add-rows').DataTable();
        var counter = 1;

        $('#addRow').on('click', function () {
            t.row.add([
                counter + '.1',
                counter + '.2',
                counter + '.3',
                counter + '.4',
                counter + '.5',
                counter + '.6',
                counter + '.7',
                counter + '.8',
                counter + '.9',
                counter + '.10',
                counter + '.11',
                counter + '.12'
            ]).draw(false);

            counter++;
        });

        // Automatically add a first row of data
        $('#addRow').click();
    });


    $(document).ready(function () {
        $('#example').DataTable();
    });

    //fixed header
    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#fixed-header', {
            "fixedHeader": true
        });

    });

    //modal data datables
    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#model-datatables', {
            responsive: {
                details: {
                    display: $.fn.dataTable.Responsive.display.modal({
                        header: function (row) {
                            var data = row.data();
                            return 'Details for ' + data[0] + ' ' + data[1];
                        }
                    }),
                    renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                        tableClass: 'table'
                    })
                }
            }
        });

    });

    //buttons exmples
    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#buttons-datatables', {
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'print', 'pdf'
            ]
        });
    });

    //buttons exmples
    document.addEventListener('DOMContentLoaded', function () {
        let table = new DataTable('#ajax-datatables', {
            "ajax": {
                url: "/CRM/Configurations/Users/Index1",
                type: 'POST',
                headers: { 'XSRF-TOKEN': $('@Html.AntiForgeryToken()').val() }
               
               
            },
           
            "columnDefs": [
                {
                    "targets": -1,
                    "data": "Id",
                    "render": function (data, type, row, meta) {
                        return '<ul class="list-inline hstack gap-2 mb-0"> <li class="list-inline-item" data-bs-toggle="tooltip"data-bs-trigger="hover" data-bs-placement="top"title="View"><a href="javascript:void(0)" data-bs-toggle="modal"><i class="ri-eye-fill align-bottom text-muted" onclick="ShowViewPopUp(' + data + ')" ></i></a></li> <li class="list-inline-item" data-bs-toggle="tooltip"data-bs-trigger="hover" data-bs-placement="top"title="Edit" ><a class="edit-item-btn" href="javascript:void(0)"data-bs-toggle="modal" > <i class="ri-pencil-fill align-bottom text-muted" onclick="editButtonClick(' + data + ')"></i> </a> </li>    <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top"title="Delete"> <a class="remove-item-btn" data-bs-toggle="modal"href="javascript:void(0)" > <i class="ri-delete-bin-fill align-bottom text-muted" onclick="deleteBarber(' + data + ')"></i> </a></li></ul>';
                        ;
                    },
                    "sortable": false
                },
                
                { "name": "Id", "data": "Id", "targets": 0, "visible": false },
                {
                    "name": "FullName", "data": "FullName", "targets": 1 },
                //{ "name": "Email", "data": "Email", "targets": 3, "visible": true },
                { "name": "PhoneNumber", "data": "PhoneNumber", "targets": 2 }
            



            ],
        });
    });

 
</script>*@